!function(){function t(){for(var t="0123456789ABCDEF",n="#",o=0;o<6;o++)n+=t[Math.floor(16*Math.random())];rgb=[];for(var o=0;o<6;o+=2)rgb.push(parseInt(n.substring(o+1,o+3),16));return hsl=e(rgb[0],rgb[1],rgb[2]),hsl}function e(t,e,n){t/=255,e/=255,n/=255;var o,a,i=Math.max(t,e,n),r=Math.min(t,e,n),c=(i+r)/2;if(i==r)o=a=0;else{var s=i-r;switch(a=c>.5?s/(2-i-r):s/(i+r),i){case t:o=(e-n)/s+(e<n?6:0);break;case e:o=(n-t)/s+2;break;case n:o=(t-e)/s+4}o/=6}return c>.5&&(c=.4),"hsl("+Math.floor(360*o)+", "+Math.floor(100*a)+"%, "+Math.floor(100*c)+"%)"}var n=io(window.location.protocol+"//"+window.location.host+":3000"),o=$(window).height()-110,a=$(window).width()-20,i="";window.addEventListener("load",function(){function e(t,e,n){s.push(t),l.push(e),h.push(n)}context=document.getElementById("canvas").getContext("2d"),$("#canvas").attr("height",o+"px"),$("#canvas").attr("width",a+"px"),document.getElementById("playerform").addEventListener("submit",function(t){t.preventDefault(),$(".canvas-container").removeClass("hide"),$(".valign-wrapper").addClass("hide"),i=this.name.value,$("#inp").blur(),window.scrollTo(0,0)}),$("#submit_drawing").on("click",function(t){t.preventDefault(),n.emit("join",{id:window.location.pathname.split("/")[2],name:i,drawing:[s,l,h,o,a,v]}),n.disconnect(),$("#canvas").remove(),$(".valign-wrapper").removeClass("hide"),$(".valign").append("<p class='sent-text'>Sent!</p>")});var c,s=new Array,l=new Array,h=new Array,d=!1,v=t();$("#canvas").bind("touchstart",function(t){d=0==window.pageYOffset;var n=t.originalEvent.touches[0].pageX-this.offsetLeft,o=t.originalEvent.touches[0].pageY-this.offsetTop;c=!0,e(n,o),r.redraw(s,l,h,v,!1)}),$("#canvas").bind("touchmove",function(t){c&&(e(t.originalEvent.touches[0].pageX-this.offsetLeft,t.originalEvent.touches[0].pageY-this.offsetTop,!0),r.redraw(s,l,h,v,!1)),t.preventDefault()}),$("#canvas").bind("touchend",function(t){c=!1}),$("#canvas").mouseleave(function(t){c=!1})});var r={redraw:function(t,e,n,o,a){if(context.strokeStyle=o,context.lineJoin="round",context.lineWidth=5,a)for(var i=0;i<t.length;i++)context.beginPath(),n[i]&&i?context.moveTo(t[i-1],e[i-1]):context.moveTo(t[i]-1,e[i]),context.lineTo(t[i],e[i]),context.closePath(),context.stroke();else context.beginPath(),n[n.length-1]?context.moveTo(t[n.length-2],e[n.length-2]):context.moveTo(t[n.length-1]-1,e[n.length-1]),context.lineTo(t[n.length-1],e[n.length-1]),context.closePath(),context.stroke()}}}();